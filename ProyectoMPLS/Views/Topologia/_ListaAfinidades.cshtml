@model ProyectoMPLS.Models.Topologia.AfinidadViewModel

<style>
    .colorpicker, .colorpicker * {
        z-index: 9999;
    }
</style>

<!-- modal placeholder -->
<div id='afinidad' class='modal fade '>
    <div id='afinidadContent'></div>
</div>

<!--  Modal content para editar afinidad -->
<div class="modal fade editar-afinidad" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">

        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->

<!--  Modal content para borrar afinidad -->
<div class="modal fade agregar-afinidad" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" style="display: none;">
    <div class="modal-dialog">
        <div class="modal-content">

        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div><!-- /.modal -->


<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h4 class="modal-title" id="myModalLabel">Lista de Afinidades</h4>
</div>

@if (Model != null && Model.listaAfinidades.Any())
{
    // HTML code of Partial View
    <div class="modal-body">
        <table class="table table-striped table-bordered" id="tblAfinidades">
            <thead>
                <tr>
                    <th>@Html.DisplayNameFor(model => model.listaAfinidades.FirstOrDefault().cDescripcion)</th>
                    <th>@Html.DisplayNameFor(model => model.listaAfinidades.FirstOrDefault().cColor)</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>

                @foreach (var item in Model.listaAfinidades)
                {

                    @*@Html.HiddenFor(modelItem => item.idProyecto, new { id = "tbxIdProyecto" })*@
                    <tr>
                        <td class="descripcion">
                            @Html.DisplayFor(modelItem => item.cDescripcion)
                        </td>
                        <td class="color" bgcolor="@item.cColor">
                        @*<td>*@
                            @*<i class="fa fa-circle m-l-5" color="#@item.cColor"></i>*@
                            @*<div class="btn-circle btn-lg" background-color="#@item.cColor">
                                </div>*@
                        </td>
                        <td class="color_value">@item.cColor</td>
                        <td>
                            @using (Html.BeginForm("_BorrarAfinidad", "Topologia", FormMethod.Post))
                            {
                                <div class="btn-group" role="group">
                                    <a class="btn btn-default" 
                                       id="linkEditarAfinidad" 
                                       data-modal="" data-toggle="modal" 
                                       data-target=".editar-afinidad"
                                       href="@Url.Action("_EditarAfinidad", "Topologia", new { idProyecto = item.idProyecto, idAfinidad = item.idAfinidad })">Editar</a>
                                    @Html.Hidden("idProyecto", item.idProyecto)
                                    @Html.Hidden("idAfinidad", item.idAfinidad)
                                    <button type="submit" class="btn btn-danger">Eliminar</button>
                                </div>
                            }

                            @*<a class="btn btn-danger" id="linkEliminarAfinidad" data-modal="" data-toggle="modal" href="">Eliminar</a>*@
                        </td>
                        
                    </tr>

                }

            </tbody>

        </table>
    </div>
}
else
{
    <div class="modal-body">
        <div class="test"></div>
        <h4>no tiene ninguna afinidad</h4>
    </div>
    //Message to display no record found.
}







<div class="modal-footer">
    <a class="btn btn-default" 
       id="linkCrearAfinidad" 
       data-modal="" data-toggle="modal" 
       data-target=".agregar-afinidad"
       href="@Url.Action("_CrearAfinidad", "Topologia", new { idProyecto = Model.idProyecto })">
        Agregar Afinidad
    </a>
    @*<button class="btn" id="addAfinidad">Agregar Afinidad</button>*@
    <button class="btn btn-danger" data-dismiss="modal">Cerrar</button>
</div>

@*<div id="stack2" class="modal hide fade" tabindex="-1" data-focus-on="input:first">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3>Stack Two</h3>
      </div>
      <div class="modal-body">
        <p>One fine body…</p>
        <p>One fine body…</p>
        <input type="text" data-tabindex="1">
        <input type="text" data-tabindex="2">
        <button class="btn" data-toggle="modal" href="#stack3">Launch modal</button>
      </div>
      <div class="modal-footer">
        <button type="button" data-dismiss="modal" class="btn">Close</button>
        <button type="button" class="btn btn-primary">Ok</button>
      </div>
    </div>*@
<script>

    $(document).ready(function () {
    //    //$('fa-circle').on('load', function(){
    //    $(".fa-circle").each(function () {
    //        console.log("esto " + $(this).val());
    //    });
    //    $(".fa-circle").each(function () {
    //        $(this).attr("color", $(this).parents('td').next().next().val());
    //    });
        //});
        //$("div.test").on("show", function () {

        //});

        $('form').submit(function (e) {
            var currentForm = this;
            e.preventDefault();
            bootbox.confirm('¿Está seguro de que desea eliminar esta afinidad?', function (result) {
                if (result) {
                    currentForm.submit();
                }
            });
        });
    });

</script>


